<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>Grafos Carlos</title>
  <link rel="stylesheet" href="index_files/github-markdown.css">
  <link rel="stylesheet" href="index_files/style.css">

  <script src="https://d3js.org/d3.v4.min.js"></script>

    <style>
    .links line {
    stroke: #999;
    stroke-opacity: 0.6;
    }

    .nodes circle {
    stroke: none;
    stroke-width: 1.5px;
    }

    .text text {
    pointer-events: none;
    font: 12px sans-serif;
    }
    </style>
<style></style></head>

<body>
<article class="markdown-body">
    <h1>Análisis de temas de Carlos</h1>
    <h2>Palabras asociadas a cada tema</h2>
    

    <table border="1" class="dataframe">  <thead>    <tr style="text-align: right;">      <th></th>      <th>Palabra 1</th>      <th>Palabra 2</th>      <th>Palabra 3</th>      <th>Palabra 4</th>      <th>Palabra 5</th>      <th>Palabra 6</th>      <th>Palabra 7</th>      <th>Palabra 8</th>      <th>Palabra 9</th>      <th>Palabra 10</th>    </tr>  </thead>  <tbody>    <tr>      <th>Tema 1</th>      <td>mas</td>      <td>pac</td>      <td>mismo</td>      <td>gobierno</td>      <td>partido</td>      <td>anos</td>      <td>hacer</td>      <td>cementazo</td>      <td>pais</td>      <td>corrupcion</td>    </tr>    <tr>      <th>Tema 2</th>      <td>politica</td>      <td>partido</td>      <td>puede</td>      <td>lastima</td>      <td>asi</td>      <td>pais</td>      <td>hacer</td>      <td>pac</td>      <td>carlitos</td>      <td>solo</td>    </tr>    <tr>      <th>Tema 3</th>      <td>yocreo</td>      <td>carlospresidente</td>      <td>trabajo</td>      <td>apoyo</td>      <td>cambio</td>      <td>pais</td>      <td>gracias</td>      <td>seguir</td>      <td>mas</td>      <td>gobierno</td>    </tr>    <tr>      <th>Tema 4</th>      <td>bla</td>      <td>pac</td>      <td>jaja</td>      <td>hablar</td>      <td>cago</td>      <td>mas</td>      <td>ojo</td>      <td>cara</td>      <td>bueno</td>      <td>claro</td>    </tr>    <tr>      <th>Tema 5</th>      <td>ja</td>      <td>jajaja</td>      <td>union</td>      <td>amor</td>      <td>dijo</td>      <td>ser</td>      <td>criterio</td>      <td>pesca</td>      <td>arrastre</td>      <td>derechos</td>    </tr>    <tr>      <th>Tema 6</th>      <td>don</td>      <td>otton</td>      <td>carlos</td>      <td>bien</td>      <td>bueno</td>      <td>usted</td>      <td>pac</td>      <td>mas</td>      <td>comentario</td>      <td>candidato</td>    </tr>    <tr>      <th>Tema 7</th>      <td>familia</td>      <td>dios</td>      <td>usted</td>      <td>quiere</td>      <td>hacer</td>      <td>mas</td>      <td>hijos</td>      <td>ser</td>      <td>puede</td>      <td>solo</td>    </tr>    <tr>      <th>Tema 8</th>      <td>mas</td>      <td>carlos</td>      <td>personas</td>      <td>trabajo</td>      <td>educacion</td>      <td>don</td>      <td>estudios</td>      <td>hacer</td>      <td>pais</td>      <td>publico</td>    </tr>    <tr>      <th>Tema 9</th>      <td>gracias</td>      <td>mas</td>      <td>tema</td>      <td>saludos</td>      <td>pais</td>      <td>propuestas</td>      <td>muchas</td>      <td>sabe</td>      <td>apoyo</td>      <td>plan</td>    </tr>    <tr>      <th>Tema 10</th>      <td>carlos</td>      <td>don</td>      <td>publico</td>      <td>mas</td>      <td>pais</td>      <td>nacional</td>      <td>politica</td>      <td>tema</td>      <td>fiscal</td>      <td>desarrollo</td>    </tr>    <tr>      <th>Tema 11</th>      <td>mora</td>      <td>maria</td>      <td>jose</td>      <td>daniel</td>      <td>araya</td>      <td>vargas</td>      <td>vea</td>      <td>gracias</td>      <td>gonzalez</td>      <td>rodriguez</td>    </tr>    <tr>      <th>Tema 12</th>      <td>voto</td>      <td>usted</td>      <td>otton</td>      <td>pac</td>      <td>partido</td>      <td>solis</td>      <td>don</td>      <td>presidente</td>      <td>ser</td>      <td>candidato</td>    </tr>    <tr>      <th>Tema 13</th>      <td>carlos</td>      <td>alvarado</td>      <td>don</td>      <td>creo</td>      <td>presidente</td>      <td>pac</td>      <td>mejor</td>      <td>voto</td>      <td>vamos</td>      <td>costa</td>    </tr>    <tr>      <th>Tema 14</th>      <td>pac</td>      <td>mas</td>      <td>pensiones</td>      <td>nunca</td>      <td>lujo</td>      <td>pacquetazo</td>      <td>favor</td>      <td>voto</td>      <td>paso</td>      <td>enterrado</td>    </tr>    <tr>      <th>Tema 15</th>      <td>mas</td>      <td>gobierno</td>      <td>partido</td>      <td>politica</td>      <td>hacer</td>      <td>candidato</td>      <td>ser</td>      <td>debe</td>      <td>pac</td>      <td>pais</td>    </tr>    <tr>      <th>Probabilidad 1</th>      <td>0.0226103</td>      <td>0.0189249</td>      <td>0.0149014</td>      <td>0.0148927</td>      <td>0.0138622</td>      <td>0.0115461</td>      <td>0.0105258</td>      <td>0.0101724</td>      <td>0.00842863</td>      <td>0.00828575</td>    </tr>    <tr>      <th>Probabilidad 2</th>      <td>0.0111688</td>      <td>0.00795539</td>      <td>0.00773703</td>      <td>0.0070544</td>      <td>0.0063316</td>      <td>0.00624657</td>      <td>0.00576724</td>      <td>0.00575491</td>      <td>0.00574709</td>      <td>0.00550442</td>    </tr>    <tr>      <th>Probabilidad 3</th>      <td>0.042364</td>      <td>0.0216522</td>      <td>0.0198128</td>      <td>0.0118286</td>      <td>0.0118147</td>      <td>0.00894261</td>      <td>0.00698854</td>      <td>0.00657796</td>      <td>0.00651721</td>      <td>0.00640317</td>    </tr>    <tr>      <th>Probabilidad 4</th>      <td>0.0147285</td>      <td>0.0144269</td>      <td>0.0087982</td>      <td>0.00858104</td>      <td>0.00847886</td>      <td>0.00845623</td>      <td>0.00795032</td>      <td>0.00607582</td>      <td>0.00581244</td>      <td>0.00559469</td>    </tr>    <tr>      <th>Probabilidad 5</th>      <td>0.0150743</td>      <td>0.0105784</td>      <td>0.00710447</td>      <td>0.00692004</td>      <td>0.00591482</td>      <td>0.00590334</td>      <td>0.00551799</td>      <td>0.00526104</td>      <td>0.00514231</td>      <td>0.00497565</td>    </tr>    <tr>      <th>Probabilidad 6</th>      <td>0.0346141</td>      <td>0.0332838</td>      <td>0.0173079</td>      <td>0.0165883</td>      <td>0.013977</td>      <td>0.013353</td>      <td>0.0115147</td>      <td>0.00861146</td>      <td>0.00730257</td>      <td>0.00691456</td>    </tr>    <tr>      <th>Probabilidad 7</th>      <td>0.0172768</td>      <td>0.0128478</td>      <td>0.0123243</td>      <td>0.0119556</td>      <td>0.0117586</td>      <td>0.0108706</td>      <td>0.0101353</td>      <td>0.00986848</td>      <td>0.0096309</td>      <td>0.0084759</td>    </tr>    <tr>      <th>Probabilidad 8</th>      <td>0.0124016</td>      <td>0.0106225</td>      <td>0.0101797</td>      <td>0.00987873</td>      <td>0.00758377</td>      <td>0.00752756</td>      <td>0.00709048</td>      <td>0.00694931</td>      <td>0.00618424</td>      <td>0.00594209</td>    </tr>    <tr>      <th>Probabilidad 9</th>      <td>0.0171895</td>      <td>0.017074</td>      <td>0.0146448</td>      <td>0.0119924</td>      <td>0.0110343</td>      <td>0.0109003</td>      <td>0.00888638</td>      <td>0.00875719</td>      <td>0.00788433</td>      <td>0.00681179</td>    </tr>    <tr>      <th>Probabilidad 10</th>      <td>0.013553</td>      <td>0.00965506</td>      <td>0.00825425</td>      <td>0.00820646</td>      <td>0.00744673</td>      <td>0.00740657</td>      <td>0.0071461</td>      <td>0.00661505</td>      <td>0.00639516</td>      <td>0.00619807</td>    </tr>    <tr>      <th>Probabilidad 11</th>      <td>0.0163421</td>      <td>0.014796</td>      <td>0.0143564</td>      <td>0.0133445</td>      <td>0.0115738</td>      <td>0.0115609</td>      <td>0.0109217</td>      <td>0.00949753</td>      <td>0.00909705</td>      <td>0.00843189</td>    </tr>    <tr>      <th>Probabilidad 12</th>      <td>0.0392983</td>      <td>0.0269558</td>      <td>0.0196157</td>      <td>0.017929</td>      <td>0.0142535</td>      <td>0.0131572</td>      <td>0.0114917</td>      <td>0.0113236</td>      <td>0.0110897</td>      <td>0.0103346</td>    </tr>    <tr>      <th>Probabilidad 13</th>      <td>0.090977</td>      <td>0.0455521</td>      <td>0.0375244</td>      <td>0.0337821</td>      <td>0.0279105</td>      <td>0.0275398</td>      <td>0.0250243</td>      <td>0.0234144</td>      <td>0.0218509</td>      <td>0.0188943</td>    </tr>    <tr>      <th>Probabilidad 14</th>      <td>0.10628</td>      <td>0.032577</td>      <td>0.0154781</td>      <td>0.0144547</td>      <td>0.00973735</td>      <td>0.00866497</td>      <td>0.00860642</td>      <td>0.00716223</td>      <td>0.006858</td>      <td>0.00648554</td>    </tr>    <tr>      <th>Probabilidad 15</th>      <td>0.0145864</td>      <td>0.0133319</td>      <td>0.0131214</td>      <td>0.0124661</td>      <td>0.0101471</td>      <td>0.00840234</td>      <td>0.00756324</td>      <td>0.00669046</td>      <td>0.00640273</td>      <td>0.00607039</td>    </tr>  </tbody></table>
    <h2>Distribución de temas</h2>
    <center>
        <img src="temas_carlos.svg">
    </center>
    <h2> Visualización </h2>
    <div id="links"></div>


    <center>
        <svg width="960" height="600" id="vis"></svg>
    </center>

</article>
    <script>
        var string = ""
        for(i = 1; i < 16; i++) {
            string += "<a href='#vis' onclick='d3viz(" + i + ")'>Tema " + i + " </span>"
        }
        document.getElementById("links").innerHTML = string
        function d3viz(i) {
            console.log("click en", i)
            display(i)
        }


        function scale_size(s) {
            return 1.5*Math.sqrt(s);
        }
        function display(i) {
            var svg = d3.select("svg"),
                width = +svg.attr("width"),
                height = +svg.attr("height");

            svg.selectAll("*").remove();

            var color = d3.scaleOrdinal(d3.schemeCategory20);

            var simulation = d3.forceSimulation()
                .force("link", d3.forceLink().id(function(d) { return d.id; }))
                .force("charge", d3.forceManyBody().strength(-1600))
                .force("center", d3.forceCenter(width / 2, height / 2));

            /*d3.select("#range")
                .on("input", function() {
                    simulation.force("charge").strength(-1*this.value);
                    simulation.force("center");
                    simulation.alpha(0).restart();
                });*/

                
            d3.json("topic/topic" + i + ".json", function(error, graph) {
                if (error) throw error;

                var g = svg.append("g")
                        .attr("class", "everything");

                var link = g.append("g")
                    .attr("class", "links")
                    .selectAll("line")
                    .data(graph.links)
                    .enter().append("line")
                    .attr("stroke-width", function(d) { return Math.sqrt(d.weight)/10; })

                var node = g.append("g")
                    .attr("class", "nodes")
                    .selectAll("circle")
                    .data(graph.nodes)
                    .enter()
                    .append("circle")
                    .attr("r", function(d) { return 1.5*Math.sqrt(d.size) }) 
                        .attr("fill",  "#EEE")//function(d) { return color(d.group); })
                        .attr("stroke", "none")
                        /*
                        .call(d3.drag()
                            .on("start", dragstarted)
                            .on("drag", dragged)
                            .on("end", dragended));*/

                var txt = g.append("g")
                        .attr("class", "text")
                        .selectAll("text")
                        .append("text")
                        .data(graph.nodes)
                        .enter().append("text")
                    .text(function(d) { return d.id; })
                    .attr("style", function(d) { return "font-size: " + 1.5*Math.sqrt(d.size) + "px;"; })
                    .attr("text-anchor", "middle")
                    .attr("alignment-baseline", "central")
                    /*
                    .call(d3.drag()
                        .on("start", dragstarted)
                        .on("drag", dragged)
                        .on("end", dragended));*/

                var drag_handler = d3.drag()
                    .on("start", dragstarted)
                    .on("drag", dragged)
                    .on("end", dragended);   

                drag_handler(node)
                drag_handler(txt)

                var zoom_handler = d3.zoom()
                    .on("zoom", zoom_actions);

                zoom_handler(svg);     

                simulation
                    .nodes(graph.nodes)
                    .on("tick", ticked);

                simulation.force("link")
                    .links(graph.links);

                function ticked() {
                    link
                        .attr("x1", function(d) { return d.source.x; })
                        .attr("y1", function(d) { return d.source.y; })
                        .attr("x2", function(d) { return d.target.x; })
                        .attr("y2", function(d) { return d.target.y; });

                    slack = 50;
                    node
                        .attr("cx", function(d) { 
                            return d.x;
                        })
                        .attr("cy", function(d) { 
                            return d.y;
                        })

                    txt
                        .attr("x", function(d) { return d.x; })
                        .attr("y", function(d) { return d.y; });
                }

                simulation.alpha(0.8).restart();

                function zoom_actions(){
                        g.attr("transform", d3.event.transform)
                }

                });

            function dragstarted(d) {
            if (!d3.event.active) simulation.alphaTarget(0.3).restart();
            d.fx = d.x;
            d.fy = d.y;
            }

            function dragged(d) {
            d.fx = d3.event.x;
            d.fy = d3.event.y;
            }

            function dragended(d) {
            if (!d3.event.active) simulation.alphaTarget(0);
            d.fx = null;
            d.fy = null;
            }


        }

    </script>
</body>
